<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
"http://www.w3.org/TR/html4/strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<title>修改文档</title>
		<link rel="stylesheet" href="css/base.css" />
		<style type="text/css">
			body,
			html {
				height: 100%;
			}
			
			.mainContainer {
				padding-top:10px;
				padding-left: 20px;
				padding-right: 10px;
				height: 100%;
			}
			.zhengwen{
				color:#333;
				line-height: 20px;
			}
			.zhengwen > div{
				margin-top: 10px;
			}
			.l{
				line-height: 20px;
				padding-bottom: 5px;
			}
			.l span{
				color:#333;
			}
				a {
				color: #0796fe;
				
			}
		</style> 
		<script type="text/javascript">
       window.onload = function() {

           var isstorage = false;
           var result = new Array();
           var danhao = document.getElementById("danhao").value;

           if (window.localStorage) {
               isstorage = true;
           }

           if (!isstorage) {
               result = window.parent.parent.modifyPara;
           }
           else {
               var temp = localStorage.getItem(danhao);
               if (temp) {
                   result = eval("(" + temp + ")");
               }
           }
           for (var i = 0; i < result.length; i++) {
               document.getElementById(result[i].para).innerHTML = "<span style=\"margin-left: 25px\"></span>" + result[i].text;
               document.getElementById(result[i].para).style.color = "#00AEAE";
           }
       }
    </script>
	</head>
	<body>
<body><div class="mainContainer"><input type="hidden" id="danhao" value="883132417351042241" /><div class="m-title"><span>修改文档</span><font class="a666">（此为您在报告上修改后临时保存的内容，编辑过的内容会变绿色）</font></div><div class="zhengwen"><div id="0"><span style="margin-left:25px"></span>摘要</div><div id="1"><span style="margin-left:25px"></span>随着人们生活水平的不断提高和移动终端的快速变革，越来越多的人喜欢养宠物并分享宠物的日常生活动态。从上述现象以及需求出发，本设计主要研究基于宠物信息分享以及社交功能的融合，构建基于宠物这一群体的社交平台。</div><div id="2"><span style="margin-left:25px"></span>本设计所构建的宠物社交平台分为客户端以及服务端两个部分，服务端采用Koa作为开发框架，Node.js为Web服务器，Mysql作为数据库，客户端采用微信小程序开发平台。而构建的宠物社交平台由登录注册功能，聊天功能，定位功能，发布动态功能，宠物信息管理功能，用户信息管理以及信息分享等功能模块组成。</div><div id="3"><span style="margin-left:25px"></span>论文首先介绍了平台开发的背景，进行需求分析，确定系统模块设计方案，然后编码实现整个系统，并且在不同系统的真机上进行了测试，最终完成了宠物社交平台。本设计将宠物社交与微信小程序平台相结合而设计的社交平台增强了宠物社交平台系统的稳定性，为该社交平台提供了巨大的潜在用户，帮助用户解决了大部分有关宠物的问题，满足了用户对宠物信息分享的需求，提高了用户的生活体验。</div><div id="4"><span style="margin-left:25px"></span>[关键词]：宠物信息分享；社交平台；微信小程序；Node.js</div><div id="5"><span style="margin-left:25px"></span>Abstact</div><div id="6"><span style="margin-left:25px"></span>With the continuous improvement of people&#39;s living standards and the rapid change of mobile terminals, more and more people like to keep pets and share the daily life of pets. Starting from the above phenomena and needs, this design mainly studies the construction of a social platform based on pets based on the integration of pet information sharing and social functions.</div><div id="7"><span style="margin-left:25px"></span>The pet social platform constructed by this design is divided into two parts, the client and the server. The server uses Koa as the development framework, Node.js as the web server, Mysql as the database, and the client uses the WeChat applet development platform. The constructed pet social platform consists of login and registration functions, chat functions, positioning functions, release dynamic functions, pet information management functions, user information management, and information sharing and other functional modules.</div><div id="8"><span style="margin-left:25px"></span>The dissertation first introduces the background of platform development, conducts requirements analysis, determines the system module design plan, and then codes the entire system, and tests it on real machines of different systems, and finally completes the pet social platform. The social platform designed by combining pet socialization with WeChat Mini Program platform enhances the stability of the pet social platform system, provides huge potential users for the social platform, helps users solve most pet-related problems, and meets It meets the user&#39;s need for pet information sharing and improves the user&#39;s life experience.</div><div id="9"><span style="margin-left:25px"></span>[Keywords]: Pet information sharing; Social platform; WeChat mini program; Node.js</div><div id="10"><span style="margin-left:25px"></span>1 绪论</div><div id="11"><span style="margin-left:25px"></span>1.1 研究背景 </div><div id="12"><span style="margin-left:25px"></span>伴随着经济水平增长，人口老龄化步伐的加快，丁克家庭的增加，宠物逐渐变成人们娱乐休闲、情感寄托的很好选择。宠物热既是一种时尚、审美，对生活的热爱，也可以从宠物的发展窥探到一个国家的经济发展水平。据研究数据表明，在我国，宠物方面需求正以15%的速度增加。到2020年，中国宠物商品/服务消费规模有望突破2000亿元。可见，我国宠物行业正处于飞速发展期，宠物行业存在巨大人力和财力需求。[1]</div><div id="13"><span style="margin-left:25px"></span>根据《2019年中国移动互联网行业分析报告-市场现状与发展趋势分析》显示，近年来，我国移动互联网快速发展。我国移动互联网接入流量从2016年上半年的37.5GB至2019年上半年的553.9亿GB，增长约15倍。随着移动互联网的普及，我国网民使用手机上网的比例也逐渐增多。截至2019年6月，我国网民使用手机上网的比例达99.1%，较去年提升0.5个百分点。2019年上半年，手机网民经常使用的APP中，即时通信类APP占用时间最长，比例为14.5%。随着移动互联网的快速发展，使得宠物行业也能够通过移动终端为广大养宠物的用户构建一个宠物交流平台，丰富养育宠物的用户的生活和解决在这过程中遇到的问题。</div><div id="14"><span style="margin-left:25px"></span>宠物社交平台，正是在基于养宠物的用户越来越多的大趋势下和移动智能设备普及率越来越高的情况下应运而生的。通过该平台，已经有宠物的用户可以在线与其他用户进行交流，快速定位用户群体，让用户可以与其他用户分享养宠物的经验。同时，对于暂时没有养宠物的用户，平台提供了许多不同种类宠物的信息，让用户可以在养育宠物之前对想养育的宠物品类有一个初步的了解。宠物社交平台的目的就是为了让更多养育宠物的用户进一步了解宠物，让宠物更好地生活以及愉悦自己的生活[]。</div><div id="15"><span style="margin-left:25px"></span>1.2 国内外研究现状</div><div id="16"><span style="margin-left:25px"></span>1.2.1 国内研究现状</div><div id="17"><span style="margin-left:25px"></span>有关数据显示，中国宠物狗的数量已经达到2740万只，城镇平均养宠率约为11%，为世界前三的&quot;养宠大国&rdquo;。从2012年-2017年，我国宠物行业市场规模不断扩大，年均复合增长达到34.63%，增长十分迅速。据统计，2017年中国宠物行业市场规模达到1470亿，同比增长20.5%。未来，随着宠物饲养观念的普及和宠物行业延伸服务的挖掘，我国宠物行业的市场空间将进一步扩大。未来3至5年，宠物行业经济将继续增长，到2021年，养宠渗透率持续提升，预计城镇养宠率将达19%，宠物市场容量有望翻番，复合年均增长率为16.6%。到2022年，宠物市场规模有望突破2500亿元。随着国内宠物经济消费升级的推进，消费者对高品质线上宠物消费方式的接受程度越来越高。京东大数据显示，2015-2018年京东平台上，宠物消费始终保持着100%以上的增长，且有不断平稳上升的趋势[2]。</div><div id="18"><span style="margin-left:25px"></span>1.2.2 国外研究现状</div><div id="19"><span style="margin-left:25px"></span>宠物行业在欧美等发达国家经历了上百年的发展，从宠物经济产值来看，欧美宠物经济产值占全球宠物总经济产值的60%，其中美国37%，欧洲23%。美国是世界上最发达和规模最大的宠物经济体。美国宠物产品协会(APPA)数据显示，2018年美国宠物消费支出金额达到725.6亿美元，与2017年695.1亿美元相比，增长4.4%，预计2020年美国宠物消费支出金额仍将继续保持稳定增长，规模达到753.8亿美元左右。根据APPA官方网站披露，2019-2020年度的全国宠物主人调查统计数据显示，67%的美国家庭拥有至少一只宠物，拥有宠物的家庭数量已到达8490万户。千禧一代是宠物主人中的最大部分，调查结果显示，超过80%的千禧一代宠物主人拥有狗，而50%左右的人拥有猫[3]。</div><div id="20"><span style="margin-left:25px"></span>1.3 研究目的与研究意义</div><div id="21"><span style="margin-left:25px"></span>通过宠物社交平台，打造一个以宠物相关信息为核心的大环境，让用户通过该平台随时随地了解与分享自己感兴趣的宠物信息，促进用户与用户之间的交流，进而让用户与自己的宠物更好地生活，增添生活的乐趣。</div><div id="22"><span style="margin-left:25px"></span>1.4 论文结构安排</div><div id="23"><span style="margin-left:25px"></span>本论文分为六个章节，第一章是绪论，主要介绍当前养育宠物的历史发展以及国内外的研究现状，同时对论文的研究内容进行概述。</div><div id="24"><span style="margin-left:25px"></span>第二章是介绍开发宠物社交平台系统的关键技术，主要从技术以及平台方面进行说明。</div><div id="25"><span style="margin-left:25px"></span>第三章是系统需求分析，通过对用户进行需求分析，确定系统所需要的功能。</div><div id="26"><span style="margin-left:25px"></span>第四章是系统设计，通过对系统物理架构，逻辑架构以及功能和数据库方面的设计，确定系统的界面功能以及数据需求。</div><div id="27"><span style="margin-left:25px"></span>第五章是编码实现宠物社交平台系统，开发完成后对各个功能进行测试，检测稳定性以及是否完成预期需求。</div><div id="28"><span style="margin-left:25px"></span>第六章是对论文的总结，通过对宠物社交平台的开发过程以及途中遇到的问题进行了总结，同时对未来宠物社交平台的优化以及扩展作出了展望。</div><div id="29"><span style="margin-left:25px"></span>2 宠物社交平台关键技术介绍</div><div id="30"><span style="margin-left:25px"></span>2.1 Node.js+Koa框架</div><div id="31"><span style="margin-left:25px"></span>Node.js是一个基于Chrome V8 引擎的JavaScript运行环境，Node.js使用了一个事件驱动、非阻塞式I/O的模型，使其轻量又高效[深入浅出Node.js]。Koa框架是基于Node.js平台搭建的一个Web框架，是Express的下一代基于Node.js的Web框架,使用Koa编写Web 应用，通过组合不同的Generator，可以免除重复繁琐的回调函数嵌套，并极大地提升错误处理的效率。Koa不在内核方法中绑定任何中间件，它仅仅提供了一个轻量优雅的函数库，使得编写 Web 应用变得得心应手[Node.js中Express框架路由机制的研究]。</div><div id="32"><span style="margin-left:25px"></span>2.2 Vue.js</div><div id="33"><span style="margin-left:25px"></span>Vue是一套用于构建用户界面的渐进式框架。与其它大型框架不同的是，Vue被设计为可以自底向上逐层应用。Vue的核心库只关注视图层，不仅易于上手，还便于与第三方库或既有项目整合。另一方面，当与现代化的工具链以及各种支持类库结合使用时，Vue也完全能够为复杂的单页应用提供驱动。</div><div id="34"><span style="margin-left:25px"></span>2.3 JSON数据格式</div><div id="35"><span style="margin-left:25px"></span>JSON，即 JS 对象标记，其是一种与语言无关的数据交互格式JSON，即 JS 对象标记，其是一种与语言无关的数据交互格式[JSON数据]，它的数据格式不仅可以人为读写，也可通过机器来分析和产生。JSON 原本主要用于 JS 间的数据传输，但后来由于其独立于语言的特性逐渐发展成了一种跨语言的数据交换格式[24]。JSON 目前主要被 C、C++、C#、Java 和JavaScript等编程语言广泛使用。JSON 中最常用的数据结构是数组和对象。对象由键值对组成，该结构在不同的语言中实现也可能不同，如 Java 中用 Map 来表示、C#则用 Dictionary，表示数组和其他语言一样，也是有序的，该结构在实现上也随着语言的不同而不同，比如 C++可能使用链表、而 Java 则使用 List。</div><div id="36"><span style="margin-left:25px"></span>2.4 MySQL数据库</div><div id="37"><span style="margin-left:25px"></span>MySQL目前属于Oracle甲骨文公司，MySQL称之为关系型数据库。MySQL数据库能够支持在多种操作系统上运行，包括Solaris、Mac OS、FreeBSD和Windows，Linux通通支持。核心功能就是处理数据，其中提供空间供数据存储又是其主要主要功能之一。数据库一般也不直接面向数据存储，存储是交给表/索引这类对象完成的。</div><div id="38"><span style="margin-left:25px"></span>MySQL数据库是一种C/S模型（即客户端和服务端模型），客户端通过账号、密码来连接服务器，连接成功之后才可以进行数据库的操作（CRUD：增加、删除、变更、查询）。MySQL的服务端采用IO复用 + 可伸缩的连接池，实现了网络高并发的经典模型。</div><div id="39"><span style="margin-left:25px"></span>2.5 C/S架构</div><div id="40"><span style="margin-left:25px"></span>服务器-客户机，即Client-Server(C/S)结构。C/S结构通常采取两层结构。服务器负责数据的管理，客户机负责完成与用户的交互任务。</div><div id="41"><span style="margin-left:25px"></span>客户机通过局域网与服务器相连，接受用户的请求，并通过网络向服务器提出请求，对数据库进行操作。服务器接受客户机的请求，将数据提交给客户机，客户机将数据进行计算并将结果呈现给用户。服务器还要提供完善安全保护及对数据完整性的处理等操作，并允许多个客户机同时访问服务器，这就对服务器的硬件处理数据能力提出了很高的要求。</div><div id="42"><span style="margin-left:25px"></span>在C/S结构中，应用程序分为两部分:服务器部分和客户机部分。服务器部分是多个用户共享的信息与功能，执行后台服务，如控制共享数据库的操作等;客户机部分为用户所专有，负责执行前台功能，在出错提示、在线帮助等方面都有强大的功能，并且可以在子程序间自由切换。</div><div id="43"><span style="margin-left:25px"></span>2.6微信小程序</div><div id="44"><span style="margin-left:25px"></span>微信小程序，简称小程序，英文名Mini Program，是一种不需要下载安装即可使用的应用，它实现了应用&quot;触手可及&rdquo;的梦想，用户扫一扫或搜一下即可打开应用。小程序是一种不用下载就能使用的应用，也是一项门槛非常高的创新，经过将近两年的发展，已经构造了新的小程序开发环境和开发者生态。</div><div id="45"><span style="margin-left:25px"></span>3 系统需求分析</div><div id="46"><span style="margin-left:25px"></span>3.1 需求概述</div><div id="47"><span style="margin-left:25px"></span>在对项目进行设计步骤前，首先要弄清两个方面的信息，一个是产品特点，另一个是用户特征，在此基础上才能对项目进行准确清晰的需求分析。在充分了解了产品所需要的的功能后，对产品进行分析以及之后的设计方案，才是最符合课题要求的。</div><div id="48"><span style="margin-left:25px"></span>3.1.1 产品特点分析</div><div id="49"><span style="margin-left:25px"></span>正如第一章所提及到的，本设计的主旨是为广大养宠物的用户提供一个方便交流与分享宠物信息的社交平台，这句话的三个关键词是：&quot;方便&rdquo;，&quot;分享&rdquo;和&quot;社交&rdquo;。针对这三个方面，可以针对总体的需求从以下几个方面展开。</div><div id="50"><span style="margin-left:25px"></span>(1)平台的选择，随着移动设备和网络通讯技术的迅速迭代发展，2017年发展迅速的微信小程序出现在大众视线中，截止到2019年第一季度，微信的使用用户已经达到了11亿，微信小程序以微信这一聊天社交软件作为载体，潜在的使用用户是十分庞大的。微信小程序是一种轻型App，它不需要下载，用户使用完就可以退出关闭，具有发布信息，发布广告和服务功能[微信小程序的媒体价值]。它不局限于移动设备的操作系统类型，无论是Android操作系统，ios操作系统还是windows操作系统的移动设备，只要下载了微信，都可以通过微信打开小程序，随用随打开，用完即走。所以使用微信小程序平台作为宠物社交平台的客户端平台，不仅降低了宠物社交平台的开发成本，提高了宠物社交平台运行的稳定性，还为宠物社交平台提供了巨大的潜在用户。</div><div id="51"><span style="margin-left:25px"></span>(2)社交平台通常采用的交流方式是在线聊天，宠物社交平台的特点就是为喜欢宠物的用户们提供一个社交平台，通过宠物这一媒介为不同地区的用户交流彼此的养宠经验，分享自己的爱宠动态。所以宠物社交平台在提供在线聊天功能的基础上，还提供了发布动态功能，类似于微信的朋友圈功能，用户不仅可以发布自己宠物的图片或者视频，还能看到其他用户分享的动态内容，通过分享自己宠物动态的形式，和其他用户进行交流，满足了用户想要分享自己爱宠的需求。</div><div id="52"><span style="margin-left:25px"></span>(3)有许多想要养宠物的用户想要通过一个平台去了解宠物信息，宠物社交平台针对这一用户群体，特意设计了宠物百科，宠物知识介绍等模块向想要了解宠物信息的用户提供了一个渠道，宠物百科里面包含了常见的宠物种类以及品种，详细介绍了不同种类宠物的特点以及生活习性。在宠物知识介绍里，介绍了一些在日常生活中宠物会出现的一些问题以及如何去解决这个问题的方法。想要养宠物的用户可以通过这些功能模块初步了解宠物信息，进而找到自己想要养的宠物类型。</div><div id="53"><span style="margin-left:25px"></span>(4)宠物是宠物社交平台的核心，许多用户平时对宠物的花费主要在食物，护理和医疗方面，针对这一方面，宠物社交平台提供了记账本功能，方便用户记录每一次的花费。微信小程序开放了地理位置功能，宠物社交平台可以通过这一点，为用户就近搜索到附件的宠物医院，宠物店等。</div><div id="54"><span style="margin-left:25px"></span>3.1.2 用户特点分析</div><div id="55"><span style="margin-left:25px"></span>宠物社交平台针对的用户主要分为两种，一种是已经有宠物的用户，另外一种是暂时还没有宠物的用户，不同特点的用户也应该区别分析。</div><div id="56"><span style="margin-left:25px"></span>(1)有宠物的用户绝大部分的需求是分享动态，交流经验，发布问题等，作为微信小程序形态，所以这些功能不仅需要有，对于排版布局的要求可能也会不同。</div><div id="57"><span style="margin-left:25px"></span>(2)对于没有宠物的用户，除了上述等基本功能外，还需要有介绍引导性的功能模块。</div><div id="58"><span style="margin-left:25px"></span>3.2 功能性需求</div><div id="59"><span style="margin-left:25px"></span>通过上述需求分析，确定了用户主要通过平台分享宠物信息，和其他用户进行交流。确定了本系统的用例图如图3.1所示：</div><div id="60"><span style="margin-left:25px"></span>3.2.1 用户登录注册</div><div id="61"><span style="margin-left:25px"></span>新用户进入平台时要注册账号，需要用真实手机号进行注册，需要用手机号接收验证码进行注册。用户登录的方式有两种，分别是手机号密码登录和手机号验证码登录。</div><div id="62"><span style="margin-left:25px"></span>3.2.2 宠物信息功能</div><div id="63"><span style="margin-left:25px"></span>用户进入平台后，可以添加自己的宠物信息，包括宠物的品种，头像，性别，年龄等等。每个用户可以添加多个宠物信息。</div><div id="64"><span style="margin-left:25px"></span>3.2.3 宠物百科</div><div id="65"><span style="margin-left:25px"></span>对常见的宠物进行信息收集，包括犬科，猫科，兔类，鼠类，龟类，鱼类，爬行类，鸟类等。</div><div id="66"><span style="margin-left:25px"></span>3.2.4 宠物常见问题</div><div id="67"><span style="margin-left:25px"></span>针对宠物日常出现的问题，包括健康问题，饮食习惯，性格培养，技能练习收集相关的科普知识文章，</div><div id="68"><span style="margin-left:25px"></span>3.2.5 宠物服务商家定位</div><div id="69"><span style="margin-left:25px"></span>经过用户授权同意后，获取用户的地理位置，对用户所处的周边地区进行宠物服务商家定位，比如宠物医院，宠物护理店，宠物商品店等。</div><div id="70"><span style="margin-left:25px"></span>3.2.6 社区动态需求</div><div id="71"><span style="margin-left:25px"></span>用户在社区可以看到其他用户发布的动态，动态内容可以是文字，图片和视频等类型，社区不限制用户权限，采取每个用户都能看到其他用户动态内容的形式，用户可以评论和点赞其他用户的评论。用户可以看到发布动态的用户的个人信息，可以关注其他用户，可以和其他用户进行一对一聊天。</div><div id="72"><span style="margin-left:25px"></span>3.2.7 发布动态</div><div id="73"><span style="margin-left:25px"></span>每个用户可以在社区模块界面发布动态，动态内容可以是文字，图片和视频。</div><div id="74"><span style="margin-left:25px"></span>3.2.8 个人中心</div><div id="75"><span style="margin-left:25px"></span>用户个人中心包括个人信息，我的宠物，我的动态，我的关注，我的收藏，退出登录等模块，</div><div id="76"><span style="margin-left:25px"></span>用户在个人信息模块中修改自己的个人信息，包括昵称，性别和地区。我的宠物模块可以查看，修改或新增用户的宠物信息。我的动态模块中保存了用户之前发布的动态，包括图片动态和视频动态。我的关注模块里可以查看和取消用户已经关注的其他用户，可以和已关注用户进行私聊，可以查看已关注用户的个人信息。我的收藏模块记录了当前用户点赞的其他用户已发布动态，用户可以取消点赞或者查看该点赞动态详情。退出登录模块可以让当前用户退出宠物社交平台，回到登录页面。</div><div id="77"><span style="margin-left:25px"></span>3.3 非功能性需求</div><div id="78"><span style="margin-left:25px"></span>(1)易用性</div><div id="79"><span style="margin-left:25px"></span>系统界面设计一定要遵循易用性原则，系统界面要简单易用，不要设计太复杂的界面，</div><div id="80"><span style="margin-left:25px"></span>只有简单易用的操作界面才能让用户更方便使用。</div><div id="81"><span style="margin-left:25px"></span>(2)可扩展性</div><div id="82"><span style="margin-left:25px"></span>系统设计需要具有良好的可扩展性，本系统功能肯定没有涵盖宠物社交平台所有需要具备的功能,在以后系统运行中，会根据不同情况的需求对系统进行修改和完善。由于条件限制，许多功能还暂时没有实现。</div><div id="83"><span style="margin-left:25px"></span>(3)性能需求</div><div id="84"><span style="margin-left:25px"></span>小程序单个分包不能超过2M,所以要限制源代码包的大小，将一些比较大的静态图片和文件进行压缩，避免用户首次加载小程序的时候出现等待时间过长的现象，对于加载数据量比较大的模块要采取懒加载或者分页加载等形式进行。</div><div id="85"><span style="margin-left:25px"></span>4 系统设计</div><div id="86"><span style="margin-left:25px"></span>系统设计主要从物理层和逻辑层两方面来考虑。其中物理层决定系统架构，逻辑层决定系统功能实现的思路。系统设计是整个工作的前提和基础，决定了整个系统的框架结构和系统功能的实现步骤与逻辑，设计的优劣会影响系统整体质量和功能实现情况。本系统设计主要从基本设计原则、物理架构设计和逻辑设计三个方面展开。</div><div id="87"><span style="margin-left:25px"></span>4.1 系统设计基本原则</div><div id="88"><span style="margin-left:25px"></span>(1)简易性原则</div><div id="89"><span style="margin-left:25px"></span>简单易操作的界面可以保证用户们操作本系统的正确率和流畅性，大大减少用户因操作上而造成的食物。与此同时，合适的颜色搭配可以提高用户的使用体验。</div><div id="90"><span style="margin-left:25px"></span>(2)模块化设计原则</div><div id="91"><span style="margin-left:25px"></span>对系统进行细化和分解，将其分解成许多个内在联系强、相对独立的小模块，每个小模块各司其职，实现系统不同的功能，随后再对每个小模块进行单独设计与开发，让设计变得简单。</div><div id="92"><span style="margin-left:25px"></span>4.2 系统物理架构设计</div><div id="93"><span style="margin-left:25px"></span>本系统的物理架构主要由用户移动终端、移动互联网络(2G/3G/4G/5G网络、WIFI等)、微信服务器、互联网、信息交互系统五大部分组成，其主要结构如图4.1所示：</div><div id="94"><span style="margin-left:25px"></span>其中用户智能移动终端不仅仅是手机，像平板电脑和PC端等，只要可以连接移动互联网并且可以登录微信都可以应用于本系统。其中，移动互联网络(2G/3G/4G/5G网络、WIFI等)是用户与微信之间沟通的桥梁，而微信服务器是腾讯公司官方提供的，不需要我们去准备，而微信服务器作为一个&quot;中转站&rdquo;为用户提供了许多用于登录微信的接口。微信服务器会通过互联网与本系统自身的服务器相连接，因此本系统的数据是直接存储在系统自身的服务器上的。</div><div id="95"><span style="margin-left:25px"></span>本系统信息交互流程主要如图4.2所示：</div><div id="96"><span style="margin-left:25px"></span>从图中可以得知，用户先通过微信客户端发送信息给微信小程序，微信小程序接收到信息后会发送到微信主服务器，主服务器接收到信息后，会自动将信息封装成JSON格式发送给小程序所对应的第三方服务器进行数据处理，完成处理后第三方服务器将信息封装成JSON格式数据返回给微信服务器，再由微信服务器返回给小程序，最终发送给用户的移动终端。</div><div id="97"><span style="margin-left:25px"></span>4.3 系统逻辑架构设计</div><div id="98"><span style="margin-left:25px"></span>系统的正常运行需要后台的支持和对数据进行预处理，系统总体逻辑框架图如4.3所示：</div><div id="99"><span style="margin-left:25px"></span>系统使用的是C/S架构，主要分为以下三方面。</div><div id="100"><span style="margin-left:25px"></span>表示层(UI)。表示层是用户进入本系统的入口，为用户和系统之间提供了接口。在本系统中，表示层主要是微信小程序客户端。</div><div id="101"><span style="margin-left:25px"></span>业务逻辑层(BLL)。本系统的业务逻辑层主要由微信服务器和系统服务器两部分组成。</div><div id="102"><span style="margin-left:25px"></span>逻辑层不参与微信小程序的前端展示，逻辑层会对前端返回的数据进行处理。在本系统中，业务逻辑层主要是根据用户发送的请求选择对应的模块进行调用。</div><div id="103"><span style="margin-left:25px"></span>数据访问层(DAL)。数据访问层是系统中最关键和最重要的一层。数据是系统稳定运行的基础。数据访问层接收到的数据主要分为两类，一类为持久化数据，这类数据需要在数据库中长期保存，另一类是非持久数据，这类数据通常是一些中间数据，作为计算机处理数据的一个中间值。数据访问层主要执行数据的存储和提取等问题。</div><div id="104"><span style="margin-left:25px"></span>4.4 系统功能设计</div><div id="105"><span style="margin-left:25px"></span>在需求分析阶段已经了解了系统的任务是什么，根据需求分析的内容，将系统拆解成各个功能模块，明确各个模块之间的联系及接口定义。同时在系统数据需求的基础上，设计出相应的数据库。系统功能模块图如图4.4所示：</div><div id="106"><span style="margin-left:25px"></span>(1)登录注册模块</div><div id="107"><span style="margin-left:25px"></span>用户初次使用本系统时，需要进行注册，注册需要使用手机号码和手机验证码，验证通过后用户需要设置密码，确认密码后用户就可以登录进入本系统了。已经注册过的用户，可以通过手机号码和密码登录或者手机号码和手机验证码登录，验证通过后进入本系统。</div><div id="108"><span style="margin-left:25px"></span>(2)用户信息管理模块</div><div id="109"><span style="margin-left:25px"></span>用户基本信息包括用户的昵称，头像，性别，地区等，用户初次登入系统时会随机设置基本信息，用户可以在个人中心修改基本信息。除了基本信息外，还有用户宠物，用户动态，用户收藏，用户关注等信息。</div><div id="110"><span style="margin-left:25px"></span>(3)宠物信息管理模块</div><div id="111"><span style="margin-left:25px"></span>宠物基本信息包括品种，年龄，性别，头像，是否绝育等基本信息。用户可以添加并修改宠物基本信息。</div><div id="112"><span style="margin-left:25px"></span>(4)社区动态模块</div><div id="113"><span style="margin-left:25px"></span>用户可以在社区发表动态，动态内容可以是文字，图片和视频，发布后的动态对所有人可见，其他用户可以对动态进行评论和点赞，用户可以关注其他用户。</div><div id="114"><span style="margin-left:25px"></span>(5)聊天模块</div><div id="115"><span style="margin-left:25px"></span>用户与用户之间可以进行实时聊天，聊天内容可以是文字，也可以是图片。</div><div id="116"><span style="margin-left:25px"></span>(6)宠物相关服务模块</div><div id="117"><span style="margin-left:25px"></span>在养宠界面，设置了宠物百科，宠物知识文章介绍，宠物花销记事本等模块，开放用户定位服务，可以实时查询地图。</div><div id="118"><span style="margin-left:25px"></span>4.5 系统数据库设计</div><div id="119"><span style="margin-left:25px"></span>数据库是按照数据结构来组织、存储和管理数据的仓库。经过对宠物社交平台系统的需求分析和功能模块设计之后，可以对宠物社交平台系统概念模型抽象出用户、宠物、动态，评论等等实体。其中用户实体的E-R图如图4.5所示，一个用户实体主要包括账号，密码，性别，地区，昵称，头像等。</div><div id="120"><span style="margin-left:25px"></span>宠物实体主要包括昵称昵称，性别，出生日期，品种，绝育状态，头像等基础属性，宠物实体的E-R图如图4.6所示：</div><div id="121"><span style="margin-left:25px"></span>图4.6宠物实体关系图</div><div id="122"><span style="margin-left:25px"></span>动态实体主要包括发布用户账号，发布用户头像，发布用户昵称，动态内容，发布时间等基础属性，动态实体的E-R图如图4.7所示：</div><div id="123"><span style="margin-left:25px"></span>图4.7动态实体关系图</div><div id="124"><span style="margin-left:25px"></span>评论实体主要包括评论用户账户，评论用户头像，评论用户昵称，评论内容，评论时间，回复用户账户，回复用户头像，回复用户昵称等基础属性,评论实体的E-R图如图4.8所示：</div><div id="125"><span style="margin-left:25px"></span>图4-8评论实体关系图</div><div id="126"><span style="margin-left:25px"></span>根据概念结构设计中用户实体，宠物实体，动态实体，评论实体等实体以及各个实体之间的操作设计出了本系统的数据库表，以下是对关键数据库表中的宠物表、用户表、动态表、评论表，聊天内容表的详细介绍。</div><div id="127"><span style="margin-left:25px"></span>表4.1  用户表</div><div id="128"><span style="margin-left:25px"></span>字段名	字段类型	说明	约束</div><div id="129"><span style="margin-left:25px"></span>phoneNumber	varchar	用户账户	主键,不能为空</div><div id="130"><span style="margin-left:25px"></span>password	varchar	用户密码	</div><div id="131"><span style="margin-left:25px"></span>gender	varchar	用户性别	</div><div id="132"><span style="margin-left:25px"></span>name	varchar	用户昵称	</div><div id="133"><span style="margin-left:25px"></span>avatar	varchar	用户头像	</div><div id="134"><span style="margin-left:25px"></span>region	varchar	用户地区	</div><div id="135"><span style="margin-left:25px"></span>bgImage	varchar	背景图片	</div><div id="136"><span style="margin-left:25px"></span>表4.2  宠物表</div><div id="137"><span style="margin-left:25px"></span>字段名	字段类型	说明	约束</div><div id="138"><span style="margin-left:25px"></span>pid	int	宠物ID	主键,不能为空</div><div id="139"><span style="margin-left:25px"></span>uid	int	用户ID	</div><div id="140"><span style="margin-left:25px"></span>name	varchar	宠物昵称	</div><div id="141"><span style="margin-left:25px"></span>gender	varchar	宠物性别	</div><div id="142"><span style="margin-left:25px"></span>birthDay	varchar	宠物生日	</div><div id="143"><span style="margin-left:25px"></span>avatar	varchar	宠物头像	</div><div id="144"><span style="margin-left:25px"></span>breed	varchar	宠物品种	</div><div id="145"><span style="margin-left:25px"></span>state	int	是否	</div><div id="146"><span style="margin-left:25px"></span>表4.3  动态表</div><div id="147"><span style="margin-left:25px"></span>字段名	字段类型	说明	约束</div><div id="148"><span style="margin-left:25px"></span>post_id	int	动态ID	主键,不能为空</div><div id="149"><span style="margin-left:25px"></span>uid	varchar	用户ID	</div><div id="150"><span style="margin-left:25px"></span>name	varchar	用户昵称	</div><div id="151"><span style="margin-left:25px"></span>avatar	varchar	用户头像	</div><div id="152"><span style="margin-left:25px"></span>content	mediumtext	动态内容	</div><div id="153"><span style="margin-left:25px"></span>islike	varchar	点赞数	</div><div id="154"><span style="margin-left:25px"></span>timestamp	varchar	发布时间	</div><div id="155"><span style="margin-left:25px"></span>表4.4  评论表</div><div id="156"><span style="margin-left:25px"></span>字段名	字段类型	说明	约束</div><div id="157"><span style="margin-left:25px"></span>comment_id	int	评论ID	主键,不能为空</div><div id="158"><span style="margin-left:25px"></span>post_id	int	动态ID	</div><div id="159"><span style="margin-left:25px"></span>uid	varchar	用户ID	</div><div id="160"><span style="margin-left:25px"></span>avatar	varchar	评论用户头像	</div><div id="161"><span style="margin-left:25px"></span>name	varchar	评论用户昵称	</div><div id="162"><span style="margin-left:25px"></span>content	varchar	评论内容	</div><div id="163"><span style="margin-left:25px"></span>timestamp	varchar	评论时间	</div><div id="164"><span style="margin-left:25px"></span>to_uid	varchar	回复用户ID	</div><div id="165"><span style="margin-left:25px"></span>to_avatar	varchar	回复用户头像	</div><div id="166"><span style="margin-left:25px"></span>to_name	varchar	回复用户昵称	</div><div id="167"><span style="margin-left:25px"></span>表4.5  聊天内容表</div><div id="168"><span style="margin-left:25px"></span>字段名	字段类型	说明	约束</div><div id="169"><span style="margin-left:25px"></span>m_id	int	消息ID	主键,不能为空</div><div id="170"><span style="margin-left:25px"></span>send_id	int	发送用户ID	</div><div id="171"><span style="margin-left:25px"></span>rec_id	int	接收用户ID	</div><div id="172"><span style="margin-left:25px"></span>content	varchar	聊天内容	</div><div id="173"><span style="margin-left:25px"></span>type	int	消息类型	</div><div id="174"><span style="margin-left:25px"></span>timestamp	varchar	发送时间	</div><div id="175"><span style="margin-left:25px"></span>image	varchar	图片路径	</div><div id="176"><span style="margin-left:25px"></span>5 系统功能的实现</div><div id="177"><span style="margin-left:25px"></span>5.1 开发环境和开发工具</div><div id="178"><span style="margin-left:25px"></span>5.1.1 开发语言</div><div id="179"><span style="margin-left:25px"></span>(1)应用Node.js作为开发后台Web服务器的语言。</div><div id="180"><span style="margin-left:25px"></span>(2)前端是小程序平台，使用Html+Css+JavaScript配合使用实现。</div><div id="181"><span style="margin-left:25px"></span>(3)多种数据库语言用于增删改查数据。</div><div id="182"><span style="margin-left:25px"></span>5.1.2 开发工具</div><div id="183"><span style="margin-left:25px"></span>(1)集成开发环境微信开发者工具(测试版)。</div><div id="184"><span style="margin-left:25px"></span>(2)MySql数据库。</div><div id="185"><span style="margin-left:25px"></span>(3)Visual Studio Code。</div><div id="186"><span style="margin-left:25px"></span>(4)HBuilder X。</div><div id="187"><span style="margin-left:25px"></span>5.1.3 开发环境</div><div id="188"><span style="margin-left:25px"></span>(1)电脑：内存12G，Windows10操作系统的电脑一台。</div><div id="189"><span style="margin-left:25px"></span>(2)Web服务器：Koa。</div><div id="190"><span style="margin-left:25px"></span>(3)ios13.1系统手机2部。</div><div id="191"><span style="margin-left:25px"></span>5.2 系统功能实现与测试</div><div id="192"><span style="margin-left:25px"></span>5.2.1 用户登录和注册功能的实现与测试</div><div id="193"><span style="margin-left:25px"></span>经过慎重考虑后，登录功能没有使用微信小程序官方的授权登录，而是使用的手机号码注册和登录的方式。用户注册后可以设置密码，设置密码后直接登录进入宠物社交平台，已经注册过的用户可以选择手机号码和手机验证码登录或者手机号码和密码登录。登录成功后，后台会返回token用于前端进行授权接口。请求注册登录界面如图5.1，图5.2所示：</div><div id="194"><span style="margin-left:25px"></span>图5.1 注册界面</div><div id="195"><span style="margin-left:25px"></span>图5.2 两种登录方式界面</div><div id="196"><span style="margin-left:25px"></span>用户登录成功后会进入到系统初始页面&quot;养宠&rdquo;选项卡，&quot;养宠&rdquo;界面中主要由宠物信息，记账本，宠物百科，同城服务，精选文章等五个功能组成。如图5.3所示：</div><div id="197"><span style="margin-left:25px"></span>图5.3登录后初始页面</div><div id="198"><span style="margin-left:25px"></span>5.2.2 宠物信息管理功能的实现与测试</div><div id="199"><span style="margin-left:25px"></span>用户登录宠物社交平台后，可以添加宠物信息，可以添加多个宠物，添加宠物信息界面如图5.4所示：</div><div id="200"><span style="margin-left:25px"></span>图5.4添加宠物信息界面</div><div id="201"><span style="margin-left:25px"></span>5.2.3 社区动态功能的实现与测试</div><div id="202"><span style="margin-left:25px"></span>用户点击&quot;社区&rdquo;选项卡可以进入到&quot;社区&rdquo;界面，用户在社区界面里可以看到社区动态列表，动态列表里可以看到其他用户发布的动态，当前用户也可以发布动态，在界面顶部可以看到两个图标，点击&quot;视频&rdquo;图标可以进入发布视频动态界面，点击&quot;相机&rdquo;图标可以进入发布图片动态界面。社区动态功能具体操作界面如图5.5所示：</div><div id="203"><span style="margin-left:25px"></span>图5.5发布社区动态</div><div id="204"><span style="margin-left:25px"></span>5.2.4 在线聊天功能的实现与测试</div><div id="205"><span style="margin-left:25px"></span>用户在&quot;社区&rdquo;界面点击其他用户的头像可以查看其它用户的个人信息，可以关注该用户，也可以和该用户在线进行一对一聊天，聊天内容可以是图片或者文字。在线聊天界面如图5.6所示：</div><div id="206"><span style="margin-left:25px"></span>图5.6在线聊天界面</div><div id="207"><span style="margin-left:25px"></span>5.2.5 宠物相关服务功能的实现与测试</div><div id="208"><span style="margin-left:25px"></span>用户在&quot;萌宠界面&rdquo;点击宠物百科，地图定位，生活记事本等模块的图片时，可以进入对应功能模块的界面。下面只详细介绍宠物百科功能，用户点击宠物百科模块后，会进入宠物种类列表，用户可以选择任意一个种类列表进入该种类品种列表，进入种类品种列表后，可以点击任意一个品种查看该品种详细信息。宠物百科具体界面如图5.7所示：</div><div id="209"><span style="margin-left:25px"></span>图5.7宠物百科界面</div><div id="210"><span style="margin-left:25px"></span>5.2.6 用户信息管理功能的实现与测试</div><div id="211"><span style="margin-left:25px"></span>用户在&quot;我的&rdquo;选项卡界面增删改查自己的信息，包括个人资料，我的宠物，我的关注，我的动态，我的收藏，退出登录等功能。用户信息管理界面如图5.8所示：</div><div id="212"><span style="margin-left:25px"></span>图5.8用户信息管理界面</div><div id="213"><span style="margin-left:25px"></span>用户点击任意一个模块都可以进入对应的界面，下面只详细介绍个人资料界面，个人资料包括姓名，性别，地区等基础属性。个人资料界面如图5.9所示：</div><div id="214"><span style="margin-left:25px"></span>图5.9个人资料界面</div><div id="215"><span style="margin-left:25px"></span>6 结论</div><div id="216"><span style="margin-left:25px"></span>本系统从需求分析，到设计和编码测试，共经历了3个月的时间，期间进行了多次需求方面的修改。</div><div id="217"><span style="margin-left:25px"></span>经过此次项目编程和学习，实现了登录注册模块，用户信息管理模块，宠物信息管理模块，宠物相关服务模块，社区动态模块，在线聊天模块等功能模块的全部预期功能。在功能方面完成度较高。整个系统根据MVC模式进行开发，经过模块化的编程，后台接口和前台页面相对应，对于后期维护来说是十分方便的。数据库设计方面也是达到了预期的要求。</div><div id="218"><span style="margin-left:25px"></span>在实现系统的过程中，学习到了诸如MySql，Koa，WebSocket等前后台一系列新的知识和技术。为了优化用户体验，在前台UI界面优化和后台数据处理方面进行了大量的编码工作。比如说上拉加载，加载提示，通讯录功能，显示大图，预览图片等等。实际体验效果也确实得到了较大的提升。</div><div id="219"><span style="margin-left:25px"></span>在整个系统中，难点最大的是实现在线聊天功能，如何能够和用户及时的进行信息交互。在本系统中最终使用了WebSocket实现该功能，一改以往IM工具的轮询请求，而是建立全双工通道，使用户双方能够快速进行信息交互。</div><div id="220"><span style="margin-left:25px"></span>但是，由于时间关系和技术方面的原因，部分功能没有实现，比如说消息的推送功能还有商城功能。除此以外在编码方面还是存在一些代码冗余的问题，在数据库优化方面还有很大提升的空间，在往后的项目开发过程中应该注意。</div></div><div class="footer"><div align="center" class="a666" style="font-size:14px;padding-top:50px;padding-bottom:30px;"><div>检测报告由 <a class="nounderline" href="http://www.ptcheck.com" target="_blank">PTcheck</a>文献相似度检测系统生成 </div><div>Copyright © 2007-2018 PTcheck </div></div></div></div></body></html>